<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rock Paper Scissors</title>
  <style>
    :root{
      --bg1:#0f2027; --bg2:#203a43; --card:#0f1720;
      --accent:#ffb86b; --muted:#94a3b8; --win:#16a34a; --lose:#ef4444; --tie:#f59e0b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      color:#e6eef6; display:flex; align-items:center; justify-content:center; padding:30px;
      /* hide streak and total games lines in the scoreboard */
      /* stop showing tracked times in history (hide the timestamp element) */
      .history-item > div:nth-child(2) > div:nth-child(2) { display: none !important; }
      /* hide the "Local scores persist in your browser" note (it's the last child of .right) */
      .right > div:last-child { display: none !important; }
      .right > div:nth-of-type(2), .right > div:nth-of-type(3) { display: none; }
      }
      /* hide the auto-play button so it doesn't appear or function */
      #autoPlayBtn{ display:none !important; visibility:hidden; pointer-events:none; }
    }

    .container{
      width:100%; max-width:920px; background:linear-gradient(180deg, rgba(255,255,255,0.03), transparent);
      border-radius:14px; padding:28px; box-shadow: 0 10px 30px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      display:grid; grid-template-columns: 1fr 320px; gap:22px; align-items:center;
    }

    .left{
      padding:18px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
      border-radius:10px;
    }

    h1{margin:4px 0 8px; font-size:20px; letter-spacing:0.6px}
    p.lead{margin:0 0 18px; color:var(--muted); font-size:13px}

    .choices{
      display:flex; gap:12px; align-items:center;
    }

    .btn{
      appearance:none; border:0; cursor:pointer;
      width:96px; height:96px; border-radius:12px;
      display:flex; align-items:center; justify-content:center; flex-direction:column;
      font-size:30px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
      color:#fff; transition:transform .18s ease, box-shadow .18s ease;
      box-shadow:0 6px 18px rgba(2,6,23,0.5);
    }
    .btn:hover{transform:translateY(-6px)}
    .btn:active{transform:translateY(-2px)}
    .emoji{font-size:40px; line-height:1}
    .label{font-size:12px; opacity:0.8; margin-top:6px}

    .resultCard{
      margin-top:20px; padding:14px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
      display:flex; gap:12px; align-items:center;
    }
    .pick{
      width:76px; height:76px; border-radius:10px; background:rgba(255,255,255,0.02);
      display:flex; align-items:center; justify-content:center; font-size:28px;
      flex-direction:column;
    }
    .versus{font-size:12px; color:var(--muted)}
    .message{font-weight:600}

    .right{
      padding:18px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
      border-radius:10px; display:flex; flex-direction:column; gap:12px;
    }

    .score{
      display:flex; gap:12px; justify-content:space-between; align-items:center;
      padding:12px; border-radius:8px; background:rgba(255,255,255,0.02);
    }

    .score-item{display:flex; gap:10px; align-items:center}
    .badge{width:44px; height:44px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:20px}
    .wins{background:linear-gradient(180deg, rgba(22,163,74,0.14), rgba(22,163,74,0.06)); color:var(--win)}
    .loss{background:linear-gradient(180deg, rgba(239,68,68,0.08), rgba(239,68,68,0.04)); color:var(--lose)}
    .ties{background:linear-gradient(180deg, rgba(245,158,11,0.08), rgba(245,158,11,0.03)); color:var(--tie)}

    .meta{color:var(--muted); font-size:13px}
    .controls{display:flex; gap:8px; margin-top:auto}
    .small{padding:8px 12px; border-radius:8px; background:rgba(255,255,255,0.02); color:var(--muted); border:1px solid rgba(255,255,255,0.02); cursor:pointer}
    .primary{background:linear-gradient(90deg,var(--accent),#ff7a7a); color:#081221; font-weight:700; border:0}

    .flash{
      transform:scale(1.06); box-shadow:0 12px 28px rgba(255,255,255,0.04);
    }

    .history{
      margin-top:12px; font-size:13px; color:var(--muted); max-height:180px; overflow:auto;
    }
    .history-item{display:flex; gap:10px; align-items:center; padding:8px; border-radius:8px; margin-bottom:6px; background:rgba(255,255,255,0.01)}
    .history-item.win{border-left:4px solid var(--win)}
    .history-item.loss{border-left:4px solid var(--lose)}
    .history-item.tie{border-left:4px solid var(--tie)}
    .kbd{background:rgba(255,255,255,0.03); padding:2px 6px; border-radius:6px; font-size:12px; color:var(--muted)}

    @media (max-width:860px){
      .container{grid-template-columns:1fr; padding:18px}
      .right{order:-1}
    }
  </style>
</head>
<body>
  <div class="container" role="application" aria-label="Rock Paper Scissors game">
    <div class="left">
      <h1>Rock ¬∑ Paper ¬∑ Scissors</h1>
      <p class="lead">Pick an option to play against the computer. Tracks wins, losses, and ties.</p>

      <div class="choices" role="group" aria-label="choices">
        <button class="btn" data-move="rock" title="Rock">
          <div class="emoji">‚úä</div><div class="label">Rock</div>
        </button>
        <button class="btn" data-move="paper" title="Paper (P)">
          <div class="emoji">‚úã</div><div class="label">Paper</div>
        </button>
        <button class="btn" data-move="scissors" title="Scissors (S)">
          <div class="emoji">‚úåÔ∏è</div><div class="label">Scissors</div>
        </button>
      </div>

      <div class="resultCard" aria-live="polite">
        <div class="pick" id="playerPick">‚Äî</div>
        <div style="text-align:center; flex:1">
          <div class="versus">YOU <span style="opacity:.5">vs</span> COMPUTER</div>
          <div style="height:8px"></div>
          <div class="message" id="resultMsg">Make your move</div>
        </div>
        <div class="pick" id="computerPick">‚Äî</div>
      </div>

      <div class="history" id="historyList" aria-label="game history"></div>
    </div>

    <aside class="right" aria-label="scoreboard">
      <div class="score">
        <div class="score-item">
          <div class="badge wins">üèÜ</div>
          <div>
            <div style="font-weight:700" id="wins">0</div>
            <div class="meta">Wins</div>
          </div>
        </div>

        <div class="score-item">
          <div class="badge loss">üí•</div>
          <div>
            <div style="font-weight:700" id="losses">0</div>
            <div class="meta">Losses</div>
          </div>
        </div>

        <div class="score-item">
          <div class="badge ties">ü§ù</div>
          <div>
            <div style="font-weight:700" id="ties">0</div>
            <div class="meta">Ties</div>
          </div>
        </div>
      </div>

      <div class="meta" style="margin-top:8px">Streak: <strong id="streak">0</strong></div>
      <div class="meta" style="margin-top:4px">Total games: <strong id="total">0</strong></div>

      <div class="controls">
        <button class="small" id="undoBtn" title="Undo last game">Undo</button>
        <button class="small" id="resetBtn" title="Reset all scores">Reset</button>
        <button class="small primary" id="autoPlayBtn" title="Auto play 10 rounds">Auto-play</button>
      </div>
      <div style="font-size:12px; color:var(--muted); margin-top:8px">Local scores persist in your browser</div>
    </aside>
  </div>

  <script>
    // GitHub Copilot
    (function(){
      const buttons = document.querySelectorAll('.btn');
      const playerPickEl = document.getElementById('playerPick');
      const computerPickEl = document.getElementById('computerPick');
      const resultMsg = document.getElementById('resultMsg');
      const winsEl = document.getElementById('wins');
      const lossesEl = document.getElementById('losses');
      const tiesEl = document.getElementById('ties');
      const totalEl = document.getElementById('total');
      const streakEl = document.getElementById('streak');
      const historyList = document.getElementById('historyList');
      const undoBtn = document.getElementById('undoBtn');
      const resetBtn = document.getElementById('resetBtn');
      const autoPlayBtn = document.getElementById('autoPlayBtn');

      const MOVES = {
        rock: {emoji:'‚úä'},
        paper: {emoji:'‚úã'},
        scissors: {emoji:'‚úåÔ∏è'}
      };

      let state = {
        wins:0, losses:0, ties:0, streak:0, total:0, history:[]
      };

      const STORAGE_KEY = 'rps_state_v1';

      function save(){
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
      }
      function load(){
        try{
          const raw = localStorage.getItem(STORAGE_KEY);
          if(raw) state = JSON.parse(raw);
        }catch(e){}
      }

      function render(){
        winsEl.textContent = state.wins;
        lossesEl.textContent = state.losses;
        tiesEl.textContent = state.ties;
        totalEl.textContent = state.total;
        streakEl.textContent = state.streak;
        historyList.innerHTML = '';
        state.history.slice().reverse().forEach(entry => {
          const div = document.createElement('div');
          div.className = 'history-item ' + entry.result;
          div.innerHTML = '<div style="width:38px;text-align:center;font-size:20px">'+ (MOVES[entry.player].emoji) +'</div>'
                        + '<div style="flex:1"><div style="font-weight:600">'+ capitalize(entry.player) +' ‚Üí '+ capitalize(entry.computer) +'</div>'
                        + '<div style="font-size:12px;color:var(--muted)">'+ entry.result.toUpperCase() + (entry.date ? ' ‚Ä¢ '+entry.date : '') +'</div></div>';
          historyList.appendChild(div);
        });
      }

      function capitalize(s){ return s.charAt(0).toUpperCase()+s.slice(1) }

      function getComputerChoice(){
        const keys = Object.keys(MOVES);
        return keys[Math.floor(Math.random()*keys.length)];
      }

      function decide(player, comp){
        if(player === comp) return 'tie';
        if((player==='rock' && comp==='scissors') ||
           (player==='scissors' && comp==='paper') ||
           (player==='paper' && comp==='rock')) return 'win';
        return 'loss';
      }

      function flash(el){
        el.classList.add('flash');
        setTimeout(()=>el.classList.remove('flash'), 250);
      }

      function playRound(player){
        const comp = getComputerChoice();
        const result = decide(player, comp);
        const date = new Date().toLocaleTimeString();
        state.total++;
        if(result==='win'){ state.wins++; state.streak = Math.max(1, state.streak+1); }
        else if(result==='loss'){ state.losses++; state.streak = Math.min(-1, state.streak-1); }
        else { state.ties++; state.streak = 0; }
        state.history.push({player, computer:comp, result, date});
        save();
        // UI
        playerPickEl.textContent = MOVES[player].emoji;
        computerPickEl.textContent = MOVES[comp].emoji;
        resultMsg.textContent = result === 'win' ? 'You win üéâ' : result === 'loss' ? 'You lose üíî' : 'Tie ü§ù';
        // color feedback
        if(result==='win'){ resultMsg.style.color = 'var(--win)'; }
        else if(result==='loss'){ resultMsg.style.color = 'var(--lose)'; }
        else { resultMsg.style.color = 'var(--tie)'; }
        flash(resultMsg);
        render();
      }

      buttons.forEach(btn=>{
        btn.addEventListener('click', ()=> {
          const move = btn.dataset.move;
          playRound(move);
        });
      });

      undoBtn.addEventListener('click', ()=>{
        const last = state.history.pop();
        if(!last) return;
        // revert counts
        state.total = Math.max(0, state.total-1);
        if(last.result==='win') state.wins = Math.max(0, state.wins-1);
        if(last.result==='loss') state.losses = Math.max(0, state.losses-1);
        if(last.result==='tie') state.ties = Math.max(0, state.ties-1);
        // recompute streak (simple approach: rebuild)
        let s = 0;
        for(let i=state.history.length-1;i>=0;i--){
          const r = state.history[i].result;
          if(r==='win') s = s>0 ? s+1 : 1;
          else if(r==='loss') s = s<0 ? s-1 : -1;
          else { s = 0; break; }
        }
        state.streak = s;
        save(); render();
      });

      resetBtn.addEventListener('click', ()=>{
        if(!confirm('Reset all scores and history?')) return;
        state = {wins:0, losses:0, ties:0, streak:0, total:0, history:[]};
        save(); render();
        playerPickEl.textContent = '‚Äî'; computerPickEl.textContent='‚Äî';
        resultMsg.textContent = 'Make your move'; resultMsg.style.color='';
      });

      autoPlayBtn.addEventListener('click', async ()=>{
        autoPlayBtn.disabled = true;
        const rounds = 10;
        for(let i=0;i<rounds;i++){
          const move = Object.keys(MOVES)[Math.floor(Math.random()*3)];
          playRound(move);
          await new Promise(r=>setTimeout(r, 260));
        }
        autoPlayBtn.disabled = false;
      });

      // keyboard support
      window.addEventListener('keydown', (e)=>{
        if(e.key.toLowerCase() === 'r') playRound('rock');
        if(e.key.toLowerCase() === 'p') playRound('paper');
        if(e.key.toLowerCase() === 's') playRound('scissors');
        if(e.key === 'u') undoBtn.click();
      });

      // init
      load();
      render();
    })();
  </script>
</body>
</html>